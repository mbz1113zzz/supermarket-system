# Database configuration - use MariaDB driver to stay compatible with MySQL 8.4+
spring.datasource.driverClassName=${DB_DRIVER:org.mariadb.jdbc.Driver}
spring.datasource.url=${DB_URL:jdbc:mariadb://${DB_HOST:127.0.0.1}:${DB_PORT:3306}/${DB_NAME:supermarket}?useUnicode=true&characterEncoding=UTF-8&useSSL=false&serverTimezone=GMT%2B8&allowPublicKeyRetrieval=true}
spring.datasource.username=${DB_USERNAME:root}
spring.datasource.password=${DB_PASSWORD:123456}

# Server configuration
server.port=${SERVER_PORT:8081}
server.servlet.context-path=/supermarket
# Increase request header limit to avoid HTTP 431 (Spring Boot 3.x)
server.max-http-request-header-size=16KB

# JWT configuration
jwt.secret=${JWT_SECRET:supermarket-jwt-secret-key-2024-cityu-5003-project-secure}
jwt.expiration=${JWT_EXPIRATION:86400000}

# CORS configuration
# Dev: allow local front-end hosts
# Prod: replace with the deployed front-end domain(s)
cors.allowed-origins=${CORS_ALLOWED_ORIGINS:http://localhost:8080,http://localhost:8081,http://127.0.0.1:8080}

mybatis.mapper-locations=classpath:mapper/*.xml
mybatis.type-aliases-package=org.cityu.supermarket.entity

# Logging configuration
logging.level.org.cityu.supermarket = info
logging.level.org.cityu.supermarket.mapper = debug

#spring.mvc.view.prefix=/WEB-INF/views/
#spring.mvc.view.suffix=.jsp

# Configure dialect so PageHelper knows which database is in use
pagehelper.helper-dialect=mysql
# reasonable=true lets PageHelper clamp invalid page numbers to boundaries instead of throwing errors
pagehelper.reasonable=true
# Allow queries that request page-size=0 to return all rows
pagehelper.page-size-zero=true
# Enable passing paging params through method arguments for flexible controller queries
pagehelper.support-methods-arguments=true